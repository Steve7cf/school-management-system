<%- include('../../partials/messages') %>

<div class="container py-4">
    <div class="row justify-content-center">
        <div class="col-md-8 col-lg-7">
            <div class="card shadow-sm">
                <div class="card-header bg-primary text-white">
                    <h4 class="mb-0"><%= announcement.title %></h4>
                </div>
                <div class="card-body">
                    <p class="mb-2 text-muted">
                        <strong>By:</strong>
                        <% if (announcement.author && announcement.author.firstName) { %>
                            <%= announcement.author.firstName %> <%= announcement.author.lastName %>
                        <% } else { %>
                            <%= announcement.authorModel %>
                        <% } %>
                        | <strong>Audience:</strong> <%= announcement.targetAudience.join(', ') %>
                        <% if (announcement.gradeLevel) { %> | <strong>Grade:</strong> <%= announcement.gradeLevel %> <% } %>
                        | <strong>Priority:</strong> <%= announcement.priority %>
                        <% if (announcement.expiryDate) { %> | <strong>Expires:</strong> <%= new Date(announcement.expiryDate).toLocaleDateString() %> <% } %>
                    </p>
                    <hr>
                    <p><%= announcement.content %></p>
                    <hr>
                    <p class="text-end text-muted small">
                        Posted on <%= new Date(announcement.createdAt).toLocaleString() %>
                    </p>
                    <a href="/announcements" class="btn btn-secondary">Back to Announcements</a>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.card {
    border: none;
    box-shadow: 0 0 15px rgba(0,0,0,0.1);
    border-radius: 10px;
}

.announcement-header {
    border-bottom: 1px solid rgba(0,0,0,0.1);
    padding-bottom: 1rem;
}

.badge {
    font-weight: 500;
    padding: 0.5em 1em;
}

.btn-group .btn {
    display: inline-flex;
    align-items: center;
}

.announcement-content {
    font-size: 1.1rem;
    line-height: 1.6;
}
</style>

<script>
function deleteAnnouncement(id) {
    if (confirm('Are you sure you want to delete this announcement?')) {
        fetch(`/announcements/${id}`, {
            method: 'DELETE',
            headers: {
                'Content-Type': 'application/json'
            }
        }).then(response => {
            if (response.ok) {
                window.location.href = '/announcements';
            } else {
                alert('Error deleting announcement');
            }
        }).catch(error => {
            console.error('Error:', error);
            alert('Error deleting announcement');
        });
    }
}
</script> 